{
    "$schema": "http://json-schema.org/draft-06/schema",
    "$id": "https://github.com/StardustD2/Destiny-2-Character-Stats/blob/main/schema.json",
    "definitions": {
        "CharacterStats": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Mobility": {
                    "$ref": "#/definitions/Mobility"
                },
                "Resilience": {
                    "$ref": "#/definitions/Resilience"
                },
                "Recovery": {
                    "$ref": "#/definitions/Recovery"
                },
                "Discipline": {
                    "$ref": "#/definitions/Generic"
                },
                "Intellect": {
                    "$ref": "#/definitions/Generic"
                },
                "Strength": {
                    "$ref": "#/definitions/Generic"
                }
            },
            "required": [
                "Discipline",
                "Intellect",
                "Mobility",
                "Recovery",
                "Resilience",
                "Strength"
            ],
            "title": "CharacterStats"
        },
        "Generic": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Abilities": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Ability"
                    }
                },
                "Overrides": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Override"
                    }
                }
            },
            "required": [
                "Abilities",
                "Overrides"
            ],
            "title": "Generic"
        },
        "Ability": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Hash": {
                    "type": "integer",
                    "description": "D2 Manifest inventoryItem hash"
                },
                "Name": {
                    "type": "string",
                    "description": "For organization purposes only. Does not necessarily match the inventoryItem entry name from the D2 Manifest."
                },
                "Cooldowns": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 11,
                    "maxItems": 11,
                    "description": "Array index represents the Character Stat tier. Cooldowns are in seconds. Rounded to 2 decimal points."
                },
                "ChargeBasedScaling": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 1,
                    "description": "Represents the behavior of certain abilities possessing additional scaling on their cooldown depending on the number of stored ability charges. The array's length represents the number of charges an ability has intrinsically. Numbers at every array index represent the Charge Rate scalar for the ability with [index] number of stored ability charges. As this is a Charge Rate scalar, cooldown times can be calculated by dividing the times in the Cooldowns member of abilities by the scalars in this array. Do note that this is not a required member of Ability objects and will only be present if an ability has multiple charges. (Therefore, if this property is present, it is to be assumed that the ability only has a single charge by default)"
                }
            },
            "required": [
                "Cooldowns",
                "Hash",
                "Name"
            ],
            "title": "Ability"
        },
        "Override": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Hash": {
                    "type": "integer",
                    "description": "D2 Manifest inventoryItem hash"
                },
                "Name": {
                    "type": "string",
                    "description": "For organization purposes only. Does not necessarily match the inventoryItem entry name from the D2 Manifest."
                },
                "Requirements": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    },
                    "minItems": 1,
                    "description": "The inventoryItem hash of each ability that is required to trigger the effects of this Scalar. Any one of these will trigger its effect as only one is required to do so. (These are usually also the same ability but for the different subclasses, hence you should NOT be able to have more than one equipped at once)"
                },
                "CooldownOverride": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 11,
                    "maxItems": 11,
                    "description": "Array index represents the Character Stat tier. Cooldowns are in seconds. Rounded to 2 decimal points. Overrides the cooldowns of the items listed in the 'Requirements' array before the scalar is applied. Identical to the 'Cooldowns' array of the 'Ability' object. Contains 11 0s if not in use."
                },
                "Scalar": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 1,
                    "description": "Length of the array is equal to the length of the 'Requirements' array. Each item represents a multiplier to the cooldown time of the abilities listed in the 'Requirements' array at the same array index. Multiple scalars can stack with each other if their requirements are met (eg. Bastion Aspect and Citan's Ramparts Exotic Gauntlets). If 'CooldownOverride' property is specified: 'Scalar's are factored in after 'CooldownOverride's."
                },
                "FlatIncrease": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    },
                    "minItems": 1,
                    "description": "Length of the array is equal to the length of the 'Requirements' array. Each item represents a flat increase to the cooldown time of the abilities listed in the 'Requirements' array at the same array index. If 'CooldownOverride' or 'Scalar' property is specified: Time is added to the cooldown times at every tier after 'CooldownOverride's and 'Scalar's have been applied."
                }
            },
            "anyOf": [
                {"required": ["Hash", "Name", "Requirements", "CooldownOverride"]},
                {"required": ["Hash", "Name", "Requirements", "Scalar"]},
                {"required": ["Hash", "Name", "Requirements", "FlatIncrease"]}
            ],
            "title": "Override"
        },
        "Mobility": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "WalkingSpeed": {
                    "type": "array",
                    "items": {
                        "type": "number",
                        "minItems": 11,
                        "maxItems": 11,
                        "description": "Array index represents the Mobility tier. The speeds are represented in meters per second. Rounding beyond 2 decimal places is not recommended."
                    }
                },
                "StrafeSpeed": {
                    "type": "array",
                    "items": {
                        "type": "number",
                        "minItems": 11,
                        "maxItems": 11,
                        "description": "Array index represents the Mobility tier. The speeds are represented in meters per second. Rounding beyond 2 decimal places is not recommended."
                    }
                },
                "CrouchSpeed": {
                    "type": "array",
                    "items": {
                        "type": "number",
                        "minItems": 11,
                        "maxItems": 11,
                        "description": "Array index represents the Mobility tier. The speeds are represented in meters per second. Rounding beyond 2 decimal places is not recommended."
                    }
                },
                "Abilities": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Ability"
                    }
                },
                "Overrides": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Override"
                    }
                }
            },
            "required": [
                "Abilities",
                "Overrides",
                "CrouchSpeed",
                "StrafeSpeed",
                "WalkingSpeed"
            ],
            "title": "Mobility"
        },
        "Recovery": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "TimeToFullHP": {
                    "type": "array",
                    "items": {
                        "type": "number",
                        "minItems": 11,
                        "maxItems": 11
                    },
                    "description": "Array index represents the Recovery tier. The numbers represent how many seconds it takes to heal from 0 to full HP. Rounding beyond 1 decimal place is not recommended."
                },
                "Abilities": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Ability"
                    }
                },
                "Overrides": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Override"
                    }
                }
            },
            "required": [
                "Abilities",
                "Overrides",
                "TimeToFullHP"
            ],
            "title": "Recovery"
        },
        "Resilience": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "TotalHP": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    },
                    "minItems": 11,
                    "maxItems": 11,
                    "description": "Array index represents the Resilience tier. The numbers represent your total HP at each tier. 'Health' is a static 70 HP, the rest are what Bungie calls 'Shields' in-game. If you wish to display them separately, just subtract 70 from the numbers to get your shield HP."
                },
                "DamageResistance": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    },
                    "minItems": 11,
                    "maxItems": 11,
                    "description": "Array index represents the Resilience tier. The numbers represent the percentage damage resistance granted *IN PVE* at each tier."
                },
                "FlinchResistance": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    },
                    "minItems": 11,
                    "maxItems": 11,
                    "description": "Array index represents the Resilience tier. The numbers represent the percentage flinch resistance granted at each tier."
                },
                "Abilities": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Ability"
                    }
                },
                "Overrides": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Override"
                    }
                }
            },
            "required": [
                "Abilities",
                "Overrides",
                "DamageResistance",
                "FlinchResistance",
                "TotalHP"
            ],
            "title": "Resilience"
        }
    }
}
